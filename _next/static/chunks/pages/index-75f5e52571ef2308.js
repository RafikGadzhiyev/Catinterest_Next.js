(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(1165)}])},4134:function(t,n,e){"use strict";e.d(n,{I:function(){return l}});var r=e(5893),i=e(9473),a=e(1938),u=e(5934),o=e(7294),c=e(5675),s=e.n(c),f=(0,o.memo)((function(t){var n=(0,i.v9)((function(t){return t})),e=(0,i.I0)(),u=function(t,e,r){if(null===n.favoriteCats||!n.favoriteCats.some((function(t){return t.id===r}))){var i=t.target;"BUTTON"!==i.tagName&&(i=i.closest("button"));var a=i.children;for(var u in a){var o=a[u];if("I"===o.tagName){o.className=e;break}}}},c=(0,o.useCallback)((function(r,i){null!==n.favoriteCats&&n.favoriteCats.some((function(t){return t.id===i.id}))?(u(r,"bi bi-heart",i.id),t.isFav?e(function(t){return{type:"REMOVE_FAVORITE_CAT",payload:{cat:t}}}(i)):e(function(t){return{type:"REMOVE_FAVORITE_CAT_FROM_STORAGE",payload:{cat:t}}}(i))):(u(r,"bi bi-heart-fill active",i.id),e(function(t){return{type:"ADD_TO_FAVORITES",payload:{cat:t}}}(i)))}),[]);return(0,r.jsxs)(a.y4,{children:[(0,r.jsx)(s(),{src:t.imageData.URL+"",alt:"Cat picture",width:225,height:225,objectFit:"cover"}),(0,r.jsx)(a.qn,{className:"options-container",children:(0,r.jsxs)(a.dJ,{onMouseEnter:function(n){return u(n,"bi bi-heart-fill",t.id)},onMouseLeave:function(n){return u(n,"bi bi-heart",t.id)},onClick:function(n){return c(n,{id:t.id,url:t.imageData.URL,width:t.imageData.width,height:t.imageData.height})},children:[null!==n.favoriteCats&&!n.favoriteCats.some((function(n){return n.id===t.id}))&&(0,r.jsx)("i",{className:"bi bi-heart"}),null!==n.favoriteCats&&n.favoriteCats.some((function(n){return n.id===t.id}))&&(0,r.jsx)("i",{className:"bi bi-heart-fill active"})]})})]})}));f.displayName="Cat";var l=(0,o.memo)((function(t){var n=t.isFav,e=(0,i.v9)((function(t){return t}));return(0,r.jsxs)(a.x0,{children:[!n&&null!==e.cats&&e.cats.map((function(t){return(0,r.jsx)(f,{id:t.id,imageData:{URL:t.url,width:t.width,height:t.height},isFav:n},(0,u.Z)())})),n&&null!==e.favoriteCats&&e.favoriteCats.map((function(t){return(0,r.jsx)(f,{id:t.id,imageData:{URL:t.url,width:t.width,height:t.height},isFav:n},(0,u.Z)())}))]})}));l.displayName="CatsList"},1165:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return w}});var r=e(4051),i=e.n(r),a=e(5893),u=e(7294),o=e(9473);function c(t,n,e,r,i,a,u){try{var o=t[a](u),c=o.value}catch(s){return void e(s)}o.done?n(c):Promise.resolve(c).then(r,i)}var s=function(){return function(){var t,n=(t=i().mark((function t(n){var e,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/get_cats",{method:"POST",body:JSON.stringify({limit:30,pageOffset:0}),headers:{"Content-Type":"application/json"}});case 2:return e=t.sent,t.next=5,e.json();case 5:r=t.sent,n({type:"__INIT__",payload:{cats:r.cats||[]}});case 7:case"end":return t.stop()}}),t)})),function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function u(t){c(a,r,i,u,o,"next",t)}function o(t){c(a,r,i,u,o,"throw",t)}u(void 0)}))});return function(t){return n.apply(this,arguments)}}()},f=e(1938),l=e(4800),v=e(4134);function d(t,n,e,r,i,a,u){try{var o=t[a](u),c=o.value}catch(s){return void e(s)}o.done?n(c):Promise.resolve(c).then(r,i)}var h=function(t,n){return function(){var e,r=(e=i().mark((function e(r){var a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/get_cats",{method:"POST",body:JSON.stringify({limit:t,pageOffset:n}),headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:u=e.sent,r({type:"ADD_NEW_CATS",payload:{new_cats:u.cats}});case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(t){d(a,r,i,u,o,"next",t)}function o(t){d(a,r,i,u,o,"throw",t)}u(void 0)}))});return function(t){return r.apply(this,arguments)}}()};function p(t,n,e,r,i,a,u){try{var o=t[a](u),c=o.value}catch(s){return void e(s)}o.done?n(c):Promise.resolve(c).then(r,i)}function m(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var a=t.apply(n,e);function u(t){p(a,r,i,u,o,"next",t)}function o(t){p(a,r,i,u,o,"throw",t)}u(void 0)}))}}var w=function(){var t=(0,o.I0)(),n=(0,o.v9)((function(t){return t})),e=(0,u.useState)(!1),r=e[0],c=e[1],d=(0,u.useState)(1),p=d[0],w=d[1],y=(0,u.useState)(!1),_=y[0],x=y[1],g=u.useRef(!1),C=(0,u.useCallback)((function(){var n=document.documentElement,e=n.scrollHeight,r=n.clientHeight+n.scrollTop,a=400;if(!g.current&&e-a<=r){x((function(){return!0})),g.current=!0;var u=function(){var n=m(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(h(20,p));case 2:w((function(t){return t+1})),x((function(){return!1})),g.current=!1;case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();u()}}),[]);return(0,u.useEffect)((function(){var e=function(){var n=m(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c((function(){return!0})),n.next=3,t(s());case 3:c((function(){return!1}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return 0===n.cats.length&&e(),window.addEventListener("scroll",C,{passive:!0}),function(){return window.removeEventListener("scroll",C)}}),[]),(0,a.jsxs)(f.Z1,{children:[r&&(0,a.jsx)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),!r&&(0,a.jsx)(v.I,{isFav:!1}),_&&(0,a.jsx)("p",{style:{marginTop:"1rem"},children:"...\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0435\u0449\u0435 \u043a\u043e\u0442\u0438\u043a\u043e\u0432..."})]})}}},function(t){t.O(0,[932,774,888,179],(function(){return n=8312,t(t.s=n);var n}));var n=t.O();_N_E=n}]);